# TranslationToolUI “做大做强”发展路线建议（面向维护者）

> 目标：在保持现有核心体验的前提下，规划 5 条线并行推进（功能扩展、AI 增强、跨平台、企业/商业化、性能稳定性），给出短中长期主题、依赖与风险。

## 0. 前提与事实来源

- 功能/平台基线来自 README 与 PROJECT_DETAILS（WASAPI/MP3 为 Windows 限制）（README.md / PROJECT_DETAILS.md）。
- UI 与交互现状来自 `MainWindow.axaml` 与 `ConfigView.axaml`（“洞察”Tab 暂未实现）。
- 核心链路来自 `SpeechTranslationService` 与音频服务（Windows-only 录音/转码）。
- 未找到 `netxtui.md`（设计意图文档缺失，需补充后再细化 UI 方向）。

## 1. 现状关键能力与瓶颈

### 关键能力

- 实时语音识别/翻译（含中间结果/最终结果）。
- 输入源选择（默认麦克风、WASAPI 设备、Loopback）。
- 录音 + MP3 转码（Windows）。
- 历史记录、字幕文件（SRT/VTT）与复盘播放。
- 浮窗字幕。
- 本地 JSON 配置持久化。

### 主要瓶颈

- **平台限制**：WASAPI 与 Media Foundation 使得音频链路在非 Windows 平台不可用。
- **服务单点**：仅依赖 Azure Speech；网络与订阅稳定性限制可用性。
- **UI 扩展空间不足**：右侧“洞察”Tab 暂未实现，缺少可扩展的信息架构。
- **性能/稳定性**：长时间运行、无回显重连机制仍需加强可观测性与回放稳定性。
- **商业化基础薄弱**：缺少用户/授权/统计/多租户等企业化能力。

## 2. UI/交互可扩展面（基于 MainWindow / ConfigView）

- “洞察”Tab 可承载：翻译质量统计、关键词摘要、模型/语言切换建议、会议纪要等。
- 录音与字幕复盘区已具备播放与列表基础，可扩展为“会话详情页/检索/批量导出”。
- 配置页已有订阅/录音/超时/字幕开关，可扩展为“模板化配置 + 一键切换场景”。

## 3. 路线图阶段总览（Mermaid）

```mermaid
flowchart LR
    P0[短期: 稳定与可维护] --> P1[中期: 功能扩展与AI增强]
    P1 --> P2[长期: 跨平台与商业化]
```

## 4. 五条线并行路线（短/中/长期）

> 说明：优先级以“对现有用户价值 + 实施复杂度”评估。

| 线路 | 优先级 | 短期（0~3个月） | 中期（3~9个月） | 长期（9~18个月） | 关键依赖 | 风险/约束 |
| --- | --- | --- | --- | --- | --- | --- |
| 功能扩展 | 高 | 历史记录过滤/检索；批量导出字幕；多语言模板 | 会话详情页、关键词统计、自动分段 | 多会话合并/对齐、跨文件搜索 | UI 信息架构、字幕/音频解析能力 | 需要设计稿；避免 UI 复杂化 |
| AI 增强 | 高 | 引入摘要/关键词（可选离线或 API） | 会议纪要、角色/说话人标注 | 对话理解/多模型路由 | LLM API 接入、成本控制 | API 成本与隐私合规 |
| 跨平台 | 中 | 识别链路在 macOS/Linux 上 fallback 调研 | 引入跨平台音频采集层（如 PortAudio/AVFoundation/ALSA） | 完整跨平台发布流程 | 音频后端抽象、测试设备 | 平台差异大、维护成本高 |
| 企业/商业化 | 中 | 配置模板导入导出；自定义品牌文案 | 订阅管理、多账号配置、统计上报 | 多租户/授权/商业策略 | 后端服务与授权体系 | 合规、隐私、成本 |
| 性能稳定性 | 高 | 加强日志与指标（识别耗时、重连次数） | 自动健康检查、错误恢复策略 | 离线缓存与断点续传 | 观测体系、测试脚本 | 监控/诊断负担 |

## 5. 阶段化目标（可执行主题）

### 短期目标（P0：稳定与可维护）

- 以“可解释”和“可复盘”为目标补全日志字段（识别耗时、设备信息、重连原因）。
- 完成“洞察”Tab 的最低可用版本（统计/摘要/关键词任一）。
- 将录音与字幕导出流程文档化（强调 Windows 依赖）。

### 中期目标（P1：功能扩展与 AI 增强）

- 加入可选的 AI 摘要/关键词模块（支持开关 + 费用提示）。
- 增强复盘：支持在字幕上直接编辑、重新导出。
- 将配置页升级为“场景化模板”（例如会议/课程/直播）。

### 长期目标（P2：跨平台与商业化）

- 抽象音频采集层，逐步支持 macOS/Linux 的可用链路。
- 引入授权/账号或轻量后端服务，实现团队共享与统计。
- 设计商业化包装：收费版本与基础版差异化。

## 6. 关键依赖与风险清单（显式列出）

- **Windows-only 音频链路**：`WasapiPcm16AudioSource` 与 `WavToMp3Transcoder` 需要替代实现。
- **Azure 订阅机制**：订阅/费用/区域可用性会限制 AI 增强与企业化拓展。
- **Markdown 渲染兼容性**：Help/About 依赖 Markdown.Avalonia，外置文档需考虑格式兼容。
- **多平台 UI 适配**：Avalonia 跨平台 UI 仍需实测音频链路与字体渲染。

## 7. 空白/假设项（待补充）

1. 缺少 `netxtui.md`（历史设计意图未对齐，需补文档再细化 UI 路线）。
2. 缺少发布脚本与完整打包矩阵说明，商业化与跨平台计划需补全发布流程。
